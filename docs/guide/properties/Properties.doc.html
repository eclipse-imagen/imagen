<html><head><title>Image Properties</title></head>
<body bgcolor=#ffffff>
 
<center>
<a href="JAITOC.fm.html"><img src="shared/contents.gif" alt="Contents"></a> <a href="Graphics.doc.html"><img src="shared/previous.gif" alt="Previous"></a> <a href="Client-server.doc.html"><img src="shared/next.gif" alt="Next"></a> <p><font size=5><i>Programming in Java Advanced Imaging</i></font>
</center>
<br>
 
<center>
<a name="47227">
<table width=90% border=0><tr>
<td align=right><font size=3>C H A P T E R</font><font size=7><img src="shared/sm-space.gif">11</td></table>
</a></center><center>
<a name="47285">
<table width=90% border=0><tr><td align=right>
<hr size=7 noshade>
<font size=6>Image Properties</font></td></table>
</a></center><blockquote>
<p><br><br><br><P><font size=7><b>T</b></font>HIS chapter describes image properties.
<p><a name="50856">
<h2>11.1	<img src="shared/space.gif">Introduction</h2>
</a>In addition to the pixel data, images occasionally have many other kinds of data associated with them. These data, known as <em>properties</em>, is a simple database of arbitrary data attached to the images. Each property is simply an Object with a unique, case-insensitive name.
<p>The properties are arbitrary and depend on the intended application. JAI provides methods that enable effective use of properties in the context of an image processing application but, in most cases, leaves the specification of the property objects themselves to the developer.
<p>Some examples of properties are:
<p><ul>
<li>Descriptions of exotic shapes, such as hexagonal grids<p></ul><ul>
<li>Mapping from digital pixel values to photometric values<p></ul><ul>
<li>A defined region of interest (ROI) in the source image<p></ul>Every node in an image chain may be queried for its properties. The value of a property at a particular node may be derived by one of the following mechanisms:
<p><ul>
<li>It may be <em>copied</em> from the node's sources. This is the default behavior if no other behavior is specified.<p></ul><ul>
<li>It may be <em>produced</em> by the node from non-property information available in the node.<p></ul><ul>
<li>It may be <em>synthesized</em> by the node from a rendering.<p></ul><ul>
<li>It may be <em>inherited</em> or produced computationally from the properties of the node's sources.<p></ul><ul>
<li>It may be <em>set explicitly</em> by the <code>setProperty</code> method in one of the appropriate classes: <code>Planarimage</code>, <code>RenderedOp</code>, or <code>RenderableOp</code>. Properties of a node may not be set once the node has been rendered.<p></ul>When the value of a property is requested from a node in a rendered chain, i.e., a <code>RenderedOp</code> node, it will be derived from the first of the following for which it is defined:
<p><ul>

1.	 Synthetic properties (see below).<p>

2.	 Local properties, i.e., those set by an invocation of setProperty() on the node.<p>

3.	 The source image of the operation specified by invoking the method <code>OperationRegsitry.copyPropertyFromSource()</code>.<p>

4.	 The rendering of the node. Note however that properties set by invoking <code>setProperty()</code> on the rendering of the node rather than on the node itself will not be propagated back to the node itself.<p>

5.	 Any PropertyGenerators either defined by the associated operation or added by an invocation of <code>RenderedOp.addPropertyGenerator()</code>. PropertyGenerators added by the latter method supersede those associated with the operation, e.g., via its OperationDescriptor.<p>

6.	 The sources of the operation. The first source has higher precedence than the second source and so on.<p>
</ul>
The same order of precedence applies in the case of renderable chains, i.e., RenderableOp nodes, with the exception of item 4, viz., properties created within the contextual rendering of the RenderableOp are not propagated back to the RenderableOp node itself.
<p>There are a couple of important items to note at this point. First, when a node is created with another node or nodes as its source(s), it might invoke methods on the source node that force the source node to be rendered. Consequently properties should be set on a node before it is used as the source of other operations. Second, the rendering of a node does <em>not</em> inherit the properties of the node itself nor are properties set on the rendering of the node propagated back to the node. Image properties are controlled and generated by the <code>PropertySource</code> and <code>PropertyGenerator</code> interfaces.
<p><a name="52071">
<h3>11.1.1	<img src="shared/space.gif">The PropertySource Interface</h3>
</a>The <code>PropertySource</code> interface contains methods from the <code>RenderedImage</code> and <code>RenderableImage</code> interfaces that identify and read properties. <code>PlanarImage</code>, <code>RenderableOp</code>, and <code>RenderedOp</code> all implement <code>PropertySource</code>.
<p>The interface consists of the <code>getProperty</code> and <code>getPropertyNames</code> methods familiar from the <code>RenderedImage</code> and <code>RenderableImage</code> interfaces.
<p><code>PropertySource</code> is implemented by <code>ImageJAI</code>. Since all RenderedImages used within JAI are descendents of <code>PlanarImage</code> which implements <code>ImageJAI</code>, all images may be assumed to implement <code>PropertySource</code>.
<p><table border = 0>
<tr>
<td><img src = "shared/cistine.gif"></td>
<td><hr>
<b>API:</b> <code>javax.media.jai.PropertySource
</code>
<hr>
</td>
</table><pre><ul>
<li>String[] getPropertyNames()
<p></ul></pre><dl>
<a name="51562">
<dt><dd> returns an array of <code>Strings</code> recognized as names by this property source.
</a><P></dl>
<pre><ul>
<li>String[] getPropertyNames(String prefix)
<p></ul></pre><dl>
<a name="51576">
<dt><dd> returns an array of <code>Strings</code> recognized as names by this property source that begin with the supplied <code>prefix</code>. If the method cannot find any property names that match, null is returned.
</a><P></dl>
<pre><ul>
<li>Object getProperty(String name)
<p></ul></pre><dl>
<a name="51608">
<dt><dd> returns the value of a property.<p> 
<Table Border="3" cellpadding=3>
<caption><font size=-1><b></b></font></caption>
<tr valign=top><td>Parameters:<em></em>
<p><td><code>name</code>
<p><td>The name of the property, as a <code>String</code>.
<p>

</Table>

</a><P></dl>
<a name="51630">
<h3>11.1.2	<img src="shared/space.gif">The PropertyGenerator Interface</h3>
</a>The <code>PropertyGenerator</code> interface allows you to affect the property inheritance computation of an operation. A <code>PropertyGenerator</code> simply implements two methods:
<p><ul>
<li>The <code>getPropertyNames</code> method returns a list of the names of all available properties.<p></ul><ul>
<li>The <code>getProperty</code> method returns the value of the property, given the property name and a <code>RenderedOp</code>.<p></ul>New <code>PropertyGenerators</code> may be added to the <code>OperationRegistry</code> to be applied at a particular operation node. The <code>OperationRegistry</code> also allows an existing property on a node to be suppressed if it is no longer useful. See <a href="Extension.doc.html#47285">Chapter &#32;14, "Extending the API</a>," for more information on the <code>OperationRegistry</code>.
<p><table border = 0>
<tr>
<td><img src = "shared/cistine.gif"></td>
<td><hr>
<b>API:</b> <code>javax.media.jai.PropertyGenerator
</code>
<hr>
</td>
</table><pre><ul>
<li>String[] getPropertyNames()
<p></ul></pre><dl>
<a name="51677">
<dt><dd> returns an array of <code>Strings</code> naming properties emitted by this property generator.
</a><P></dl>
<pre><ul>
<li>Object getProperty(String name, RenderedOp op)
<p></ul></pre><dl>
<a name="51692">
<dt><dd> computes the value of a property relative to an environment of pre-existing properties emitted by the sources of a <code>RenderedOp</code>, and the parameters of that operation.<p> 
<Table Border="3" cellpadding=3>
<caption><font size=-1><b></b></font></caption>
<tr valign=top><td colspan=1 rowspan=2><em>Parameters</em>:<em></em>
<p><td><code>name</code>
<p><td>The name of the property, as a <code>String</code>.
<p>
<tr valign=top><td><code>op</code>
<p><td>The <code>RenderedOp</code> representing the operation.
<p>

</Table>

</a><P><a name="51735">
<dt><dd> The operation name, sources, and <code>ParameterBlock</code> of the <code>RenderedOp</code> being processed may be obtained by means of the <code>op.getOperationName</code>, <code>op.getSources()</code>, and <code>op.getParameterBlock()</code> methods. It is legal to call <code>getProperty()</code> on the operation's sources.
</a><P></dl>
<a name="52095">
<h2>11.2	<img src="shared/space.gif">Synthetic Properties</h2>
</a>Certain properties are <em>synthesized</em> when a node is rendered. These synthetic properties are image width (<code>image_width</code>), image height (<code>image_height</code>), minimum <em>x</em> coordinate (<code>image_min_x_coord</code>), and minimum <em>y</em> coordinate (<code>image_min_y_coord</code>). All of these properties have a value of class <code>java.lang.Integer</code>. These properties are fixed and any attempt to set them will result in an error.
<p><a name="51632">
<h2>11.3	<img src="shared/space.gif">Regions of Interest</h2>
</a>The specification of a region of interest (ROI) is a common property that is supported by all of the standard operators. The ROI is simply a description of some portion of an image. This description is propogated, along with the image, through the rendering chain. The ROI is transformed appropriately (inherited) for all geometric and area operators. For all other types of operations it is simply copied. The ROI has no bearing on the processing of image pixels, although in its rendered form it can be used as input to histogram operations. For more information, see <a href="Image-manipulation.doc.html#51458">Section &#32;6.2, "Region of Interest Control</a>."
<p>The ROI may be used as an argument to the <code>TiledImage.set</code> and <code>TiledImage.setData</code> methods so as to copy a selected area of a source or <code>Raster</code> into an existing <code>TiledImage</code> (see <a href="Acquisition.doc.html#52363">Section &#32;4.2.2, "Tiled Image</a>"<code>)</code>. The ROI may also be used as an argument to many compositing (see <a href="Image-enhance.doc.html#61005">Section &#32;7.11.2, "Image Compositing</a>") and statistical operators (see <a href="Analysis.doc.html#55366">Chapter &#32;9, "Image Analysis</a>").
<p><a name="52134">
<h2>11.4	<img src="shared/space.gif">Complex Data</h2>
</a>The COMPLEX property has value of class <code>java.lang.Boolean</code> and indicates whether the pixel values of an image represent complex-value data. (A complex-valued image wherein each pixel has N complex elements contains 2N bands with the real and imaginary components of the <em>i</em>th complex element being stored in bands 2i and 2i + 1, respectively.) This property may be <em>produced</em> by a given node either with a fixed value or with a value dependent on the parameters of the node. See <a href="Image-enhance.doc.html#59829">Section &#32;7.9, "Frequency Domain Processing</a>."
<p>
<p>
<hr><br>
 
<center>
<a href="JAITOC.fm.html"><img src="shared/contents.gif" alt="Contents"></a> <a href="Graphics.doc.html"><img src="shared/previous.gif" alt="Previous"></a> <a href="Client-server.doc.html"><img src="shared/next.gif" alt="Next"></a> <p><font size=5><i>Programming in Java Advanced Imaging</i></font>
</center>
<br>
 


<h5><a href="copyright.html">Copyright</a> &#169; 1999, Sun Microsystems, Inc.   All rights
reserved.</h5>


<!-- Last updated: Tue Nov 02 18:06:08 1999 -->
</blockquote>
</body>
</html>
